<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kontakt | TEAM LAZER</title>
  
  <link rel="stylesheet" href="../style/global.css">
  <link rel="stylesheet" href="../style/about.css"> 
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Rajdhani:wght@600;700;800&display=swap" rel="stylesheet" />

  <style>
    /* CSS BLEIBT GLEICH WIE VORHER */
    .contact-form-container { display: flex; flex-direction: column; gap: 20px; }
    .input-group { display: flex; flex-direction: column; gap: 8px; }
    .input-group label { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 0.9rem; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; }
    .required-star { color: #ff4757; margin-left: 4px; }
    .contact-input, .contact-select, .contact-textarea { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 15px; color: #fff; font-family: 'Inter', sans-serif; transition: 0.3s; width: 100%; }
    .contact-input:focus, .contact-select:focus, .contact-textarea:focus { border-color: var(--primary); background: rgba(124, 58, 237, 0.05); outline: none; box-shadow: 0 0 15px rgba(124, 58, 237, 0.2); }
    .contact-select option { background: #0a0b10; color: #fff; }
    .contact-textarea { resize: vertical; min-height: 150px; }
    
    .direct-contact-item { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; padding-bottom: 25px; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .direct-contact-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .icon-circle { width: 50px; height: 50px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; display: grid; place-items: center; color: var(--primary); font-size: 1.2rem; flex-shrink: 0; transition: 0.3s; }
    .direct-contact-item:hover .icon-circle { background: var(--primary); color: #fff; box-shadow: 0 0 20px var(--primary-glow); }
    .dc-content h4 { margin: 0 0 5px 0; color: #fff; font-family: 'Rajdhani', sans-serif; font-size: 1.1rem; }
    .dc-content a { color: var(--text-muted); font-size: 0.95rem; transition: 0.3s; }
    .dc-content a:hover { color: var(--primary); text-shadow: 0 0 10px var(--primary-glow); }

    .support-split-container { display: flex; gap: 15px; height: 100%; }
    .support-option { flex: 1; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; text-decoration: none; transition: 0.3s; cursor: pointer; padding: 20px; }
    .opt-discord:hover { background: rgba(88, 101, 242, 0.1); border-color: #5865F2; box-shadow: 0 0 20px rgba(88, 101, 242, 0.2); }
    .opt-discord i { color: #5865F2; font-size: 2.5rem; margin-bottom: 10px; transition: 0.3s; }
    .opt-chat:hover { background: rgba(16, 185, 129, 0.1); border-color: #10b981; box-shadow: 0 0 20px rgba(16, 185, 129, 0.2); }
    .opt-chat i { color: #10b981; font-size: 2.5rem; margin-bottom: 10px; transition: 0.3s; }
    .opt-title { color: #fff; font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 1.2rem; }
    .opt-desc { font-size: 0.8rem; color: var(--text-muted); margin-top: 5px; }

    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 9999; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; }
    .modal-overlay.active { display: flex; opacity: 1; }
    .modal-box { background: #0f0f13; border: 1px solid rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; max-width: 400px; width: 90%; text-align: center; transform: scale(0.8); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
    .modal-overlay.active .modal-box { transform: scale(1); }
    .modal-icon { font-size: 3rem; margin-bottom: 20px; }
    .modal-icon.error { color: #ff4757; }
    .modal-icon.success { color: #10b981; }
    .modal-title { font-family: 'Rajdhani', sans-serif; font-size: 1.5rem; margin-bottom: 10px; color: #fff; }
    .modal-text { color: var(--text-muted); margin-bottom: 25px; line-height: 1.5; }
    .modal-btn { background: rgba(255,255,255,0.1); border: none; color: #fff; padding: 10px 25px; border-radius: 8px; cursor: pointer; font-family: 'Rajdhani', sans-serif; font-weight: 700; transition: 0.3s; }
    .modal-btn:hover { background: var(--primary); }

    .box-form { grid-column: span 7; grid-row: span 2; }
    .box-info { grid-column: span 5; }
    .box-support { grid-column: span 5; }
    @media (max-width: 1024px) { .box-form, .box-info, .box-support { grid-column: span 12; } .support-split-container { flex-direction: column; } }
  </style>
</head>
<body>

  <div class="global-bg"></div>

  <header class="navbar">
    <div class="container nav-container">
      <a class="nav-logo" href="../index.html">
        <img src="../images/tl-logo-nobg.webp" alt="Logo" />
        <span class="logo-text">TEAM LAZER</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">Home</a>
        <a href="about.html">Über uns</a>
        <a href="contact.html" class="active">Kontakt</a>
        <a href="https://discord.gg/DEINLINK" target="_blank" class="chat-hover"><i class="fa-brands fa-discord"></i> Discord</a>
      </nav>
      <button class="burger-btn" id="burgerBtn"><i class="fa-solid fa-bars"></i></button>
    </div>
  </header>

  <div class="mobile-menu" id="mobileMenu">
    <a href="../index.html" class="mobile-link">Home</a>
    <a href="about.html" class="mobile-link">Über uns</a>
    <a href="contact.html" class="mobile-link active">Kontakt</a>
    <a href="https://discord.gg/DEINLINK" target="_blank" class="chat-hover"><i class="fa-brands fa-discord"></i> Discord</a>
  </div>

  <section class="small-hero">
    <div class="container fade-in-up">
      <span class="hero-tag">SUPPORT & ANFRAGEN</span>
      <h1>GET IN <span class="highlight">TOUCH</span></h1>
      <p style="color: var(--text-muted); max-width: 600px; margin: 0 auto;">
        Du hast Fragen oder benötigst technischen Support? <br>
        Wähle unten den passenden Bereich aus.
      </p>
    </div>
  </section>
  
  <div class="bento-wrapper">
    
    <section class="bento-box box-form scroll-reveal">
      <h2 class="bento-title">Nachricht senden</h2>
      <p style="font-size: 0.8rem; color: #ff4757; margin-bottom: 20px;">* Alle Felder sind Pflichtfelder.</p>
      
      <form class="contact-form-container" id="contactForm">
        <input type="text" name="_honey" style="display:none">
        <input type="hidden" name="_captcha" value="false">

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="input-group">
                <label for="name">Name / Tag <span class="required-star">*</span></label>
                <input type="text" id="name" name="name" class="contact-input" placeholder="z.B. Max">
            </div>
            <div class="input-group">
                <label for="email">E-Mail <span class="required-star">*</span></label>
                <input type="email" id="email" name="email" class="contact-input" placeholder="mail@example.com">
            </div>
        </div>

        <div class="input-group">
            <label for="department">Bereich <span class="required-star">*</span></label>
            <select id="department" name="department" class="contact-select">
                <option value="" disabled selected>Bitte wählen...</option>
                <option value="general">Allgemeine Anfrage</option>
                <option value="support">Support / Technische Hilfe</option>
                <option value="security">Security / Bug Report</option>
                <option value="partnership">Partnerschaft & Kooperation</option>
            </select>
            <small style="color: var(--text-muted); font-size: 0.75rem; margin-top: 5px;">
                Nachricht geht an: <span id="emailTarget" style="color: var(--primary);">Bitte wählen...</span>
            </small>
        </div>

        <div class="input-group">
            <label for="message">Nachricht <span class="required-star">*</span></label>
            <textarea id="message" name="message" class="contact-textarea" placeholder="Beschreibe dein Anliegen so genau wie möglich..."></textarea>
        </div>

        <button type="button" onclick="validateAndSend()" class="btn btn-primary glow-anim" style="align-self: flex-start; margin-top: 10px;">
            <i class="fa-solid fa-paper-plane"></i> Absenden
        </button>

      </form>
    </section>

    <section class="bento-box box-info scroll-reveal delay-1">
      <h2 class="bento-title">E-Mail Adressen</h2>
      <p class="bento-text" style="margin-bottom: 30px;">
        Übersicht unserer offiziellen Abteilungen.
      </p>

      <div class="direct-contact-item">
        <div class="icon-circle"><i class="fa-solid fa-envelope"></i></div>
        <div class="dc-content">
            <h4>Allgemein / Business</h4>
            <a href="mailto:kontakt@team-lazer.de">kontakt@team-lazer.de</a>
        </div>
      </div>

      <div class="direct-contact-item">
        <div class="icon-circle"><i class="fa-solid fa-headset"></i></div>
        <div class="dc-content">
            <h4>Support</h4>
            <a href="mailto:support@team-lazer.de">support@team-lazer.de</a>
        </div>
      </div>

      <div class="direct-contact-item">
        <div class="icon-circle"><i class="fa-solid fa-shield-halved"></i></div>
        <div class="dc-content">
            <h4>Security Team</h4>
            <a href="mailto:security@team-lazer.de">security@team-lazer.de</a>
        </div>
      </div>
    </section>

    <section class="bento-box box-support scroll-reveal delay-2">
      <h2 class="bento-title" style="margin-bottom: 20px;">Live Support?</h2>
      
      <div class="support-split-container">
          <a href="https://discord.gg/DEINLINK" target="_blank" class="support-option opt-discord">
              <i class="fa-brands fa-discord"></i>
              <span class="opt-title">Discord</span>
              <span class="opt-desc">Ticket System & Community</span>
          </a>

          <div onclick="openChatWidget()" class="support-option opt-chat">
              <i class="fa-solid fa-comments"></i>
              <span class="opt-title">Live Chat</span>
              <span class="opt-desc">Direkt hier schreiben</span>
          </div>
      </div>
    </section>

  </div>

  <footer class="bg-darker" style="margin-top: 50px;">
    <div class="container text-center">
      <div class="social-links" style="justify-content: center; margin-bottom: 20px;">
        <a href="#"><i class="fa-brands fa-discord"></i></a>
        <a href="#"><i class="fa-brands fa-youtube"></i></a>
        <a href="https://www.tiktok.com/@team.lazer.de"><i class="fa-brands fa-tiktok"></i></a>
        <a href="https://www.instagram.com/team_lazer.de"><i class="fa-brands fa-instagram"></i></a>
        <a href="https://wa.me/491794406720" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
      </div>
      <p class="muted">&copy; 2026 TEAM LAZER. All rights reserved.</p>
    </div>
  </footer>

  <div id="errorModal" class="modal-overlay">
      <div class="modal-box">
          <i class="fa-solid fa-circle-exclamation modal-icon error"></i>
          <h3 class="modal-title">Angaben unvollständig</h3>
          <p class="modal-text" id="errorText">Bitte überprüfe die markierten Felder.</p>
          <button class="modal-btn" onclick="closeModal('errorModal')">Verstanden</button>
      </div>
  </div>

  <div id="successModal" class="modal-overlay">
      <div class="modal-box">
          <i class="fa-solid fa-circle-check modal-icon success"></i>
          <h3 class="modal-title">Nachricht gesendet!</h3>
          <p class="modal-text">Vielen Dank. Deine Anfrage wurde erfolgreich übermittelt. Bitte prüfe gegebenenfalls deinen Spam-Ordner auf die Bestätigung.</p>
          <button class="modal-btn" onclick="closeModal('successModal')">Schließen</button>
      </div>
  </div>

  <script src="../script/main.js"></script>

  <script>
    // 1. ZIEL-ADRESSEN DEFINIEREN
    const emailMap = {
        'general': 'kontakt@team-lazer.de',
        'support': 'support@team-lazer.de',
        'security': 'security@team-lazer.de',
        'partnership': 'kontakt@team-lazer.de'
    };

    // Dropdown Logik
    const deptSelect = document.getElementById('department');
    const targetDisplay = document.getElementById('emailTarget');

    deptSelect.addEventListener('change', function() {
        const selected = this.value;
        if(emailMap[selected]) {
            targetDisplay.textContent = emailMap[selected];
        } else {
            targetDisplay.textContent = 'Bitte wählen...';
        }
    });

    // 2. SENDEN FUNKTION (ÜBER EXTERNE API)
    function validateAndSend() {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const dept = document.getElementById('department').value;
        const msg = document.getElementById('message').value.trim();
        
        let errors = [];
        if(!name) errors.push("Name fehlt");
        if(!email || !email.includes('@')) errors.push("Gültige E-Mail fehlt");
        if(!dept) errors.push("Bereich nicht ausgewählt");
        if(!msg) errors.push("Nachricht ist leer");

        if(errors.length > 0) {
            const errorList = errors.join('<br>');
            document.getElementById('errorText').innerHTML = "Folgende Felder fehlen:<br><br>" + errorList;
            openModal('errorModal');
            return;
        }

        // Button Status ändern
        const btn = document.querySelector('button[onclick="validateAndSend()"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Sende...';
        btn.disabled = true;

        // Ziel-Email holen
        const targetEmail = emailMap[dept];
        
        // HIER DER TRICK: Wir senden an FormSubmit.co per AJAX
        // Die Ziel-Adresse wird dynamisch in die URL gebaut
        fetch("https://formsubmit.co/ajax/" + targetEmail, {
            method: "POST",
            headers: { 
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({
                name: name,
                email: email, // Die Mail des Nutzers für Reply-To
                _subject: "Neue Anfrage von " + name + " (" + dept + ")",
                department: dept,
                message: msg
            })
        })
        .then(response => response.json())
        .then(data => {
            // Erfolg!
            openModal('successModal');
            document.getElementById('contactForm').reset();
            targetDisplay.textContent = 'Bitte wählen...';
        })
        .catch(error => {
            console.error('Error:', error);
            alert("Fehler beim Senden. Bitte versuche es später.");
        })
        .finally(() => {
            btn.innerHTML = originalText;
            btn.disabled = false;
        });
    }

    // Modal Helfer
    function openModal(id) { document.getElementById(id).classList.add('active'); }
    function closeModal(id) { document.getElementById(id).classList.remove('active'); }
    function openChatWidget() { alert("Chat wird geöffnet..."); }
  </script>

</body>
</html>